{% load static %} {% load humanize %}
<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/jpg" href="{% static 'img/favicon.png' %}" />
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" href="{% static 'css/style_home.css' %}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous" />


    <title>Mi Billetera | Panel</title>

</head>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

        {% include 'layout/partials/togler.html' %}

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                {% include 'layout/partials/topnavbar.html' %}

                <!-- Begin Page Content -->
                <div class="container-fluid">

                    <!-- Page Heading -->
                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
                        <h1 class="h3 mb-0 text-gray-800"></h1>
                        <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-success shadow-sm"><i
                                class="fas fa-download fa-sm text-white-50"></i> Generar Reporte</a>
                    </div>

                    {% if messages %}
                    <ul class="messages">
                        {% for message in messages %}
                        <li{% if message.tags %} class="{{ message.tags }}alert alert-danger " {% endif %}>{{ message }}</li>
                            {% endfor %}
                    </ul>
                    {% endif %}

                    <div class="col-xl-12">
                        <div class="row">

                            <!-- Monto total -->
                            <div class="col-xl-4 col-md-6 mb-4">
                                <div class="card border-left-primary shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                                    Monto Total</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ monto_total|floatformat:"2"|intcomma }}</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-file-invoice-dollar fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ingresos totales -->
                            <div class="col-xl-4 col-md-6 mb-4">
                                <div class="card border-left-success shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                    Ingresos (Totales)</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ total_ingresos|floatformat:"2"|intcomma }}</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Gastos totales -->
                            <div class="col-xl-4 col-md-6 mb-4">
                                <div class="card border-left-danger shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                    Gastos (Totales)</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ total_gastos|floatformat:"2"|intcomma }}</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Monto total -->
                            <div class="col-xl-4 col-md-6 mb-4">
                                <div class="card border-left-primary shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                                    Monto Mes Actual ({{ mes_actual }})</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ monto_mes|floatformat:"2"|intcomma }}</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-file-invoice-dollar fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ingresos mes actual -->
                            <div class="col-xl-4 col-md-6 mb-4">
                                <div class="card border-left-success shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                    Ingresos Mes Actual ({{ mes_actual }})</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ filter_mes_ingresos|floatformat:"2"|intcomma }}</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-calendar fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Gastos mes actual -->
                            <div class="col-xl-4 col-md-6 mb-4 ">
                                <div class="card border-left-danger shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                    Gastos Mes actual({{ mes_actual }})</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ filter_mes_gastos|floatformat:"2"|intcomma }}</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-calendar fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>

                    <!-- Content Row -->

                    <div class="row">

                        <!-- Area Chart -->
                        <div class="col-xl-6 col-lg-6">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-success">Resumen</h6>
                                    <div class="dropdown no-arrow">
                                        <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                        </a>
                                    </div>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <div class="chart-area">
                                        <canvas id="myAreaChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Pie Chart -->
                        <div class="col-xl-2 col-lg-3">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-dark">Ingresos recientes</h6>
                                    <div class="dropdown no-arrow">
                                        <svg fill="#6ACD99" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M384 160c-17.7 0-32-14.3-32-32s14.3-32 32-32H544c17.7 0 32 14.3 32 32V288c0 17.7-14.3 32-32 32s-32-14.3-32-32V205.3L342.6 374.6c-12.5 12.5-32.8 12.5-45.3 0L192 269.3 54.6 406.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160c12.5-12.5 32.8-12.5 45.3 0L320 306.7 466.7 160H384z"/></svg>
                                    </div>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body card-reciente h-100">
                                    <div class="chart-pie">
                                        {% for transaccion in ingresos_recientes %}
                                        <ul>
                                            <li>
                                                <span><strong>{{ transaccion.fecha }}</strong></span>
                                                <span class="text-success">{{ transaccion.monto|floatformat:"2"|intcomma }}</span>
                                                <span><strong>{{ transaccion.fk_fuente }}</strong></span>
                                            </li>
                                        </ul>
                                        {% endfor %}
                                        <a class="btn btn-outline-primary btn-sm" href="{% url 'ver_ingreso' %}">Ver más</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Pie Chart -->
                        <div class="col-xl-2 col-lg-3">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-dark">Gastos Recientes</h6>
                                    <div class="dropdown no-arrow">
                                        <svg fill="#E74A3B" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M384 352c-17.7 0-32 14.3-32 32s14.3 32 32 32H544c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32s-32 14.3-32 32v82.7L342.6 137.4c-12.5-12.5-32.8-12.5-45.3 0L192 242.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0L320 205.3 466.7 352H384z"/></svg>
                                    </div>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body card-reciente h-100 ">
                                    <div class="chart-pie ">
                                        {% for transaccion in gastos_recientes %}
                                        <ul>
                                            <li>
                                                <span><strong>{{ transaccion.fecha }}</strong></span>
                                                <span class="text-danger">{{ transaccion.monto|floatformat:"2"|intcomma }}</span>
                                                <span><strong>{{ transaccion.fk_categoria }}</strong></span>
                                            </li>
                                        </ul>
                                        {% endfor %}
                                        <a class="btn btn-outline-primary btn-sm" href="{% url 'ver_gasto' %}">Ver más</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-2 col-lg-3">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-dark">Tasas de Cambio</h6>
                                    <div class="dropdown no-arrow">
                                        <i class="fas fa-hand-holding-usd text-success"></i>
                                    </div>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body card-divisa h-100">
                                    <div class="chart-pie">
                                        <ul>
                                            <li>
                                                <span>EUR / USD</span>
                                                <span><strong>{{ rates.EUR|floatformat:"2"|safe }}</strong></span>
                                                <span>EUR</span>
                                            </li>
                                            <li>
                                                <span>JPY / USD</span>
                                                <span><strong>{{ rates.JPY|floatformat:"2" }}</strong></span>
                                                <span>JPY</span>
                                            </li>
                                            <li>
                                                <span>GBP / USD</span>
                                                <span><strong>{{ rates.GBP|floatformat:"2" }}</strong></span>
                                                <span>GBP</span>
                                            </li>
                                            <li>
                                                <span>AUD / USD</span>
                                                <span><strong>{{ rates.AUD|floatformat:"3" }}</strong></span>
                                                <span>AUD</span>
                                            </li>
                                            <li>
                                                <span>COP / USD</span>
                                                <span><strong>{{ rates.COP|floatformat:"3" }}</strong></span>
                                                <span>COP</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Content Row -->
                    <div class="row">

                        <!-- Content Column -->
                        <div class="col-lg-6 mb-4">

                            <!-- Project Card Example -->
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-success">Metas</h6>
                                </div>
                                <div class="card-body">
                                    <h4 class="small font-weight-bold">Ahorro Casa <span class="float-right">20%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <h4 class="small font-weight-bold">Ahorro Comprar Computador <span class="float-right">40%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <h4 class="small font-weight-bold">Ahorro Comprar Moto <span class="float-right">60%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- /.container-fluid -->

                    </div>
                    <!-- End of Main Content -->

                    <!-- Footer -->
                    <footer class="sticky-footer bg-white">
                        <div class="container my-auto">
                            <div class="copyright text-center my-auto">
                                <span>Copyright &copy; Mi Billetera 2023</span>
                            </div>
                        </div>
                    </footer>
                    <!-- End of Footer -->

                </div>
                <!-- End of Content Wrapper -->

            </div>
            <!-- End of Page Wrapper -->

            <!-- Scroll to Top Button-->
            <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

</body>


</html>